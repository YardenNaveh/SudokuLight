(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))s(l);new MutationObserver(l=>{for(const A of l)if(A.type==="childList")for(const c of A.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function n(l){const A={};return l.integrity&&(A.integrity=l.integrity),l.referrerPolicy&&(A.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?A.credentials="include":l.crossOrigin==="anonymous"?A.credentials="omit":A.credentials="same-origin",A}function s(l){if(l.ep)return;l.ep=!0;const A=n(l);fetch(l.href,A)}})();const G=[{id:1,name:"Earth",description:"Start here! Learn about rows and columns.",subLevels:[{gridSize:2,hideCount:1,patterns:["row"],numbers:[1,2],squares:!1,crossword:!1},{gridSize:2,hideCount:1,patterns:["col"],numbers:[1,2],squares:!1,crossword:!1},{gridSize:2,hideCount:1,patterns:["row","col"],numbers:[1,2],squares:!1,crossword:!1}]},{id:2,name:"Moon",description:"New number! Learn about the number 3.",subLevels:[{gridSize:3,hideCount:1,patterns:["row"],numbers:[1,2,3],squares:!1,crossword:!1},{gridSize:3,hideCount:1,patterns:["col"],numbers:[1,2,3],squares:!1,crossword:!1},{gridSize:3,hideCount:1,patterns:["row","col"],numbers:[1,2,3],squares:!1,crossword:!1}]},{id:3,name:"Saturn",description:"Multiple missing numbers!",subLevels:[{gridSize:3,hideCount:2,patterns:["row"],numbers:[1,2,3],squares:!1,crossword:!1},{gridSize:3,hideCount:2,patterns:["col"],numbers:[1,2,3],squares:!1,crossword:!1},{gridSize:3,hideCount:2,patterns:["row","col"],numbers:[1,2,3],squares:!1,crossword:!1}]},{id:4,name:"Star",description:"Learning about 2x2 squares and number 4!",subLevels:[{gridSize:4,hideCount:1,patterns:["row","col"],numbers:[1,2,3,4],squares:!1,crossword:!1},{gridSize:4,hideCount:1,patterns:["row","col"],numbers:[1,2,3,4],squares:!0,crossword:!1},{gridSize:4,hideCount:2,patterns:["row","col"],numbers:[1,2,3,4],squares:!0,crossword:!1}]},{id:5,name:"Comet",description:"Getting trickier with more missing numbers!",subLevels:[{gridSize:4,hideCount:3,patterns:["row","col"],numbers:[1,2,3,4],squares:!0,crossword:!1},{gridSize:4,hideCount:3,patterns:["row","col"],numbers:[1,2,3,4],squares:!0,crossword:!1},{gridSize:4,hideCount:4,patterns:["row","col"],numbers:[1,2,3,4],squares:!0,crossword:!1}]},{id:6,name:"Shooting Star",description:"Learning about numbers 5 and 6 with 3x3 square restrictions!",subLevels:[{gridSize:6,hideCount:2,patterns:["row","col"],numbers:[1,2,3,4,5,6],squares:!0,crossword:!1},{gridSize:6,hideCount:3,patterns:["row","col"],numbers:[1,2,3,4,5,6],squares:!0,crossword:!1},{gridSize:6,hideCount:4,patterns:["row","col"],numbers:[1,2,3,4,5,6],squares:!0,crossword:!1}]},{id:7,name:"Galaxy",description:"Learning about numbers 7 and 8!",subLevels:[{gridSize:4,hideCount:2,patterns:["row","col"],numbers:[5,6,7,8],squares:!0,crossword:!1},{gridSize:4,hideCount:3,patterns:["row","col"],numbers:[5,6,7,8],squares:!0,crossword:!1},{gridSize:8,hideCount:4,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8],squares:!0,crossword:!1}]},{id:8,name:"Rocket",description:"Learning about number 9 and 3x3 squares!",subLevels:[{gridSize:3,hideCount:2,patterns:["row","col"],numbers:[7,8,9],squares:!0,crossword:!1},{gridSize:9,hideCount:3,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!1,crossword:!1},{gridSize:9,hideCount:4,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!1}]},{id:9,name:"Alien",description:"Almost full Sudoku rules!",subLevels:[{gridSize:9,hideCount:5,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!1},{gridSize:9,hideCount:6,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!1},{gridSize:9,hideCount:7,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!1}]},{id:10,name:"UFO",description:"Introducing crossword patterns!",subLevels:[{gridSize:4,hideCount:2,patterns:["row","col"],numbers:[1,2,3,4],squares:!0,crossword:!0},{gridSize:6,hideCount:3,patterns:["row","col"],numbers:[1,2,3,4,5,6],squares:!0,crossword:!0},{gridSize:9,hideCount:4,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!0}]},{id:11,name:"Telescope",description:"Mix of everything you've learned!",subLevels:[{gridSize:6,hideCount:4,patterns:["row","col"],numbers:[1,2,3,4,5,6],squares:!0,crossword:!0},{gridSize:9,hideCount:5,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!0},{gridSize:9,hideCount:6,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!0}]},{id:12,name:"Sun",description:"You're a Sudoku master!",subLevels:[{gridSize:9,hideCount:7,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!0},{gridSize:9,hideCount:8,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!0},{gridSize:9,hideCount:9,patterns:["row","col"],numbers:[1,2,3,4,5,6,7,8,9],squares:!0,crossword:!0}]}];function L(t,e){const n=G.find(l=>l.id===t);return n?{...n.subLevels[e-1]||n.subLevels[0],id:t,subId:e,name:n.name,description:n.description}:null}function U(){return G.length}const v={};function R(t,e){const n=document.createElement("div"),s=t.length;n.className=`board size-${s}`;let l,A;const c=window.currentLevelData&&window.currentLevelData.squares;c?(n.classList.add("squares-enabled"),s===6?(l=2,A=3):Number.isInteger(Math.sqrt(s))?l=A=Math.sqrt(s):(l=s,A=s)):(l=s,A=s);for(let o=0;o<s;o++)for(let a=0;a<s;a++){const q=document.createElement("div");q.className="cell",q.dataset.row=o,q.dataset.col=a,c&&l<s&&(a%A===0&&a>0&&q.classList.add("left-border"),o%l===0&&o>0&&q.classList.add("top-border"));const u=t[o][a];if(u&&u.value===null)q.classList.add("empty"),q.addEventListener("click",()=>e(q,o,a));else{const i=(u==null?void 0:u.value)||t[o][a];q.textContent=i}n.appendChild(q)}return n}function T(t){const e=document.createElement("div");e.className="number-picker";const n=document.createElement("div");return n.className="number-picker-options",e.appendChild(n),e}function x(t){const e=document.querySelector(".score-number");e&&(e.textContent=t)}function $(t,e,n=0){const s=document.getElementById("app");s.innerHTML="";const l=document.createElement("div");l.className="map-score-display",l.innerHTML=`
    <div class="score">
      <div class="score-label">Total Score</div>
      <div class="score-number">${n}</div>
    </div>
  `,l.style.margin="10px 0",l.style.padding="15px",l.style.backgroundColor="#4a2c91",l.style.color="white",l.style.borderRadius="10px",l.style.boxShadow="0 3px 6px rgba(0, 0, 0, 0.2)",l.style.display="inline-block",l.style.minWidth="150px",l.style.fontWeight="bold";const A=l.querySelector(".score-number");A&&(A.style.fontSize="28px",A.style.fontWeight="bold",A.style.color="#ffcc00",A.style.marginTop="5px");const c=l.querySelector(".score-label");c&&(c.style.fontSize="14px",c.style.color="#e0e0e0"),s.appendChild(l);const o=document.createElement("h1");o.className="level-select-title",o.textContent="Select a Planet",o.style.textAlign="center",o.style.margin="20px 0",s.appendChild(o);const a=document.createElement("div");a.className="level-select";for(let i=1;i<=12;i++){const m=document.createElement("div");m.className="planet-button",t.includes(i)?m.addEventListener("click",()=>e(i)):m.classList.add("locked"),m.textContent=i;const d=["🌎","🌙","🪐","⭐","☄️","🌠","🌌","🚀","👾","🛸","🔭","🌞"];m.innerHTML=`${d[i-1]}<br>${i}`,a.appendChild(m)}s.appendChild(a);const q=document.createElement("div");q.className="button primary",q.textContent="🎮 Practice Mode",q.style.margin="20px auto",q.style.width="200px",q.style.textAlign="center",q.addEventListener("click",()=>{const i=Math.min(Math.max(...t),9);e(i)}),s.appendChild(q);const u=document.createElement("div");u.className="button reset-button",u.textContent="🔄 Reset Progress",u.style.margin="10px auto",u.style.width="200px",u.style.textAlign="center",u.style.backgroundColor="#ffcdd2",u.addEventListener("click",()=>{const i=prompt("Please enter parent password to reset progress:");i==="1234"?confirm("Are you sure you want to reset all progress?")&&window.resetGameProgress():i!==null&&alert("Incorrect password. Progress not reset.")}),s.appendChild(u)}function z(t,e=""){const n=document.querySelector(".celebrations");n.innerHTML="";const s=25,l=document.createElement("div");l.className="stars-container",l.style.position="absolute",l.style.top="85%",l.style.left="50%",l.style.transform="translate(-50%, -50%)",l.style.display="flex",l.style.flexDirection="column",l.style.alignItems="center",l.style.justifyContent="center",l.style.gap="15px",l.style.zIndex="1000",l.style.pointerEvents="none";const A=document.createElement("div");A.style.display="flex",A.style.justifyContent="center",A.style.gap="15px";for(let o=0;o<3;o++){const a=document.createElement("div");a.className="star",a.textContent="⭐",a.style.fontSize="4rem",a.style.opacity=o<t?"1":"0.3",o<t&&(a.style.animation=`star-appear 0.6s ${o*.3}s forwards`),A.appendChild(a)}if(l.appendChild(A),e){const o=document.createElement("div");o.className="congrats-text",o.textContent=`Good job, ${e}!`,o.style.fontSize="1.8rem",o.style.fontWeight="bold",o.style.color="#FF9800",o.style.marginTop="20px",o.style.textShadow="0 1px 2px rgba(0,0,0,0.2)",o.style.animation="fadeIn 1s forwards",l.appendChild(o)}n.appendChild(l),setTimeout(()=>{const o=document.getElementById("next-riddle-btn");o&&(o.disabled=!1,o.classList.add("enabled"),o.style.zIndex="3000",o.style.pointerEvents="auto")},100);const c=document.createElement("div");c.className="confetti-container",c.style.position="absolute",c.style.top="0",c.style.left="0",c.style.width="100%",c.style.height="100%",c.style.pointerEvents="none",c.style.zIndex="500",n.appendChild(c),y("celebration"),requestAnimationFrame(()=>{for(let o=0;o<s;o++){const a=document.createElement("div");a.className="confetti";const q=Math.random()*window.innerWidth,u=-20-Math.random()*100,i=5+Math.random()*15;a.style.width=`${i}px`,a.style.height=`${i}px`,a.style.left=`${q}px`,a.style.top=`${u}px`,a.style.pointerEvents="none",a.style.animation=`confetti-fall ${1+Math.random()*3}s linear forwards`,a.style.transform=`rotate(${Math.random()*360}deg)`,c.appendChild(a),setTimeout(()=>{c.contains(a)&&a.remove()},3e3)}})}function y(t){if(v[t]){v[t].currentTime=0,v[t].play().catch(n=>console.log("Audio playback prevented: ",n));return}const e=new Audio;switch(t){case"correct":e.src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAASAAAeMwAUFBQUFCgoKCgoKDMzMzMzM0dHR0dHR1VVVVVVVWhoaGhoaHZ2dnZ2doODg4ODg5GRkZGRkZ+fn5+fn6ysrKysrLq6urq6usXFxcXFxdLS0tLS0uDg4ODg4O3t7e3t7f////////////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAX/+xDEAAPkAGkAbwQAAPqfC+c7YjWAejn1UAAgjfr0AIJDVch0Ff5ID/4bGBv/51xDCCDzKQGQIYaJIlFGjRjwwMYFDAxwMlg8MCDABQbZdABAgwwMDBAIJqLAYcJoJKXjLMAQrewf/+3DE1dSiS1WbeAeJi/lwrv9rJ9zF8FcNUELQKDAxwUMUGBlCMChkYOiZiAYJIAoX7CgvMY4YXdwYHHIq/bmOBMZDLn4a77oYPQ8vRNDYKB8XDJpYQD7yNaORIjAZEwUGAgYYKGDAYVSgYOMBhDQQvAghAQgDAggLBAYb8rUTN/9xzC6B0aDAuY2DIA/8aGRv/8YH/4sVOYRD0ZVgX/IG//iOYVo99DTYx6kGIGJ//7cMTJFVlsYZGcMuY0Y1GBAWYNMf48aGZgM6ZLTRg4OmBzFEwQUDBQZHvDH+GGFgaYVTbgc4bgfIXlj7HAAIkQeGCyYWP5gA3HQYYc/5BSYjAhUqcgg7rkg5gAR6cR+L/Kgxa6P/6DFcwEDCgsMJDIAMMGkgwgquhYJDfGOAYCBhUIGDBwQHqGBQYJBhuAZ8iNgnwsAA5KeDE4REREjiYah5KUHAQYADw4eGpYGIC//uQxKkU40uRkVnYaonwYkHBQRMXBcwaD0RMHg1C6BUcVL6eYKEg4YKCQEIGAQ2I6gEBAwCBEYkFRiASGQhEQqEmgw0LjBQYBQkUFQYHAgkLnRucCAxMBiQMwCgoqLzCg0MJA0BAYQBDIzSBTr//lT/+s/1szndf65ky7/+ZTf/ztXv/9A5v//n7Tqgw4PAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7YMSxlOxCzs1rLADmhCfEEYQAAABWZXKGUxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",e.volume=.5;break;case"wrong":e.src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAASAAAeMwAUFBQUFCgoKCgoKDMzMzMzM0dHR0dHR1VVVVVVVWhoaGhoaHZ2dnZ2doODg4ODg5GRkZGRkZ+fn5+fn6ysrKysrLq6urq6usXFxcXFxdLS0tLS0uDg4ODg4O3t7e3t7f////////////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAX/+xDEAAPkAFUAZpwAAPnsRAibuQmgOp/wMAABi9GeBgQDxf5ED/4bGBh/+5UQwggw/kQGQEYFJIlFGlscDAwwMlg04DDA4eDVYjgZo/8Z8v//l4+Y/24pWiox4GBgAGIyYYGQ4SGOBgYEGPgOYcGB7pmHAqWN0KjxLf/+3DE0RSKPVVdeA5rirn4qv9jTN/5T4GDwQahA4MHAQwOChgMMQCgwUIh5gwGBwcEdikKDxKMGhMxWBDBQGBiqZHEAYFLpl0DCQmEAgcYzSRQLAwAQDDYQOqhoIHGA0EggZJDZg0aTaAMZLHg4cGHQwYvA5hQSmAQ0NtlZQYOBQsulixiUJGxnP/sYEMGHhEYNCZgobGk2j/zGXn/+LFRnUXXRQcqAhlT//7cMTFFNZ7o42cEdZA8X///iSIXETsYRD0Zh1f+3JBSYnAQENDhQyYRjIzOPD0xGCDCYHPmnw8aUYGCQuYQDBhwCGCgiYIARgoFGMSaYcCBiobA5ZHBhgKGHQqcgNxgEbg1Jmpw4YmBQ8wmETSoNGAwCChEqPnBQkGzFOYdDZlsYmFwsYCBhkoEGHSaGmQGYCaBsYvhkOGtjnUaC6xsLmiySeeFiZhfwYWMH0S3GiBUuNKiswQEDRZBP/7kMSpFGxLkVm9nFyJcGJDAZiLhxM1BwcCgIBB4LBICDCLkDBDscDGdg4gxTYMGWDFYYOGpgwQzQxYOHAocUCgZQMHWDwgQGa0DCAIXGGAw0TCeRDUhoQmDQqY+DJjoXlZjTUIAoMNFlkcjhg9lCQICAxUIDK46OLnQgYYTKppMCEERAwMHjz//mU3/+s/1szndf65lN3/+ZTd//M1f//0Df//zt1QYfBIJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMSzFMJCzs9mKADmA+e8MYQAAAABWZXKGUMBTUUAAAAAA/QZWKGUxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",e.volume=.3;break;case"hint":e.src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAASAAAeMwAUFBQUFCgoKCgoKDMzMzMzM0dHR0dHR1VVVVVVVWhoaGhoaHZ2dnZ2doODg4ODg5GRkZGRkZ+fn5+fn6ysrKysrLq6urq6usXFxcXFxdLS0tLS0uDg4ODg4O3t7e3t7f////////////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAX/+xDEAAPkAGkAbwQAAPqfC+c7YjWAejn1UAAgjfr0AIJDVch0Ff5ID/4bGBv/51xDCCDzKQGQIYaJIlFGjRjwwMYFDAxwMlg8MCDABQbZdABAgwwMDBAIJqLAYcJoJKXjLMAQrewf/+3DE1dSiS1WbeAeJi/lwrv9rJ9zF8FcNUELQKDAxwUMUGBlCMChkYOiZiAYJIAoX7CgvMY4YXdwYHHIq/bmOBMZDLn4a77oYPQ8vRNDYKB8XDJpYQD7yNaORIjAZEwUGAgYYKGDAYVSgYOMBhDQQvAghAQgDAggLBAYb8rUTN/9xzC6B0aDAuY2DIA/8aGRv/8YH/4sVOYRD0ZVgX/IG//iOYVo99DTYx6kGIGJ//7cMTJFVlsYZGcMuY0Y1GBAWYNMf48aGZgM6ZLTRg4OmBzFEwQUDBQZHvDH+GGFgaYVTbgc4bgfIXlj7HAAIkQeGCyYWP5gA3HQYYc/5BSYjAhUqcgg7rkg5gAR6cR+L/Kgxa6P/6DFcwEDCgsMJDIAMMGkgwgquhYJDfGOAYCBhUIGDBwQHqGBQYJBhuAZ8iNgnwsAA5KeDE4REREjiYah5KUHAQYADw4eGpYGIC//uQxKkU40uRkVnYaonwYkHBQRMXBcwaD0RMHg1C6BUcVL6eYKEg4YKCQEIGAQ2I6gEBAwCBEYkFRiASGQhEQqEmgw0LjBQYBQkUFQYHAgkLnRucCAxMBiQMwCgoqLzCg0MJA0BAYQBDIzSBTr//lT/+s/1szndf65ky7/+ZTf/ztXv/9A5v//n7Tqgw4PAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7YMSxlOxCzs1rLADmhCfEEYQAAABWZXKGUxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",e.volume=.4;break;case"celebration":e.src="data:audio/mp3;base64,SUQzBAAAAAAAI1RTU0UAAAAPAAADTGF2ZjU4Ljc2LjEwMAAAAAAAAAAAAAAA//tAwAAAAAAAAAAAAAAAAAAAAAAASW5mbwAAAA8AAAASAAAeMwAUFBQUFCgoKCgoKDMzMzMzM0dHR0dHR1VVVVVVVWhoaGhoaHZ2dnZ2doODg4ODg5GRkZGRkZ+fn5+fn6ysrKysrLq6urq6usXFxcXFxdLS0tLS0uDg4ODg4O3t7e3t7f////////////8AAAAATGF2YzU4LjEzAAAAAAAAAAAAAAAAJAX/+xDEAAPkAFUAZpwAAPnsRAibuQmgOp/wMAABi9GeBgQDxf5ED/4bGBh/+5UQwggw/kQGQEYFJIlFGlscDAwwMlg04DDA4eDVYjgZo/8Z8v//l4+Y/24pWiox4GBgAGIyYYGQ4SGOBgYEGPgOYcGB7pmHAqWN0KjxLf/+3DE0RSKPVVdeA5rirn4qv9jTN/5T4GDwQahA4MHAQwOChgMMQCgwUIh5gwGBwcEdikKDxKMGhMxWBDBQGBiqZHEAYFLpl0DCQmEAgcYzSRQLAwAQDDYQOqhoIHGA0EggZJDZg0aTaAMZLHg4cGHQwYvA5hQSmAQ0NtlZQYOBQsulixiUJGxnP/sYEMGHhEYNCZgobGk2j/zGXn/+LFRnUXXRQcqAhlT//7cMTFFNZ7o42cEdZA8X///iSIXETsYRD0Zh1f+3JBSYnAQENDhQyYRjIzOPD0xGCDCYHPmnw8aUYGCQuYQDBhwCGCgiYIARgoFGMSaYcCBiobA5ZHBhgKGHQqcgNxgEbg1Jmpw4YmBQ8wmETSoNGAwCChEqPnBQkGzFOYdDZlsYmFwsYCBhkoEGHSaGmQGYCaBsYvhkOGtjnUaC6xsLmiySeeFiZhfwYWMH0S3GiBUuNKiswQEDRZBP/7kMSpFGxLkVm9nFyJcGJDAZiLhxM1BwcCgIBB4LBICDCLkDBDscDGdg4gxTYMGWDFYYOGpgwQzQxYOHAocUCgZQMHWDwgQGa0DCAIXGGAw0TCeRDUhoQmDQqY+DJjoXlZjTUIAoMNFlkcjhg9lCQICAxUIDK46OLnQgYYTKppMCEERAwMHjz//mU3/+s/1szndf65lN3/+ZTd//M1f//0Df//zt1QYfBIJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/7UMSzFMJCzs9mKADmA+e8MYQAAAABWZXKGUMBTUUAAAAAA/QZWKGUxBTUUzLjEwMKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq",e.volume=.6;break;default:return}v[t]=e,e.play().catch(n=>console.log("Audio playback prevented: ",n))}let r={currentLevel:1,currentSubLevel:1,score:0,hintsLeft:3,board:[],currentEmptyCell:null,unlockedLevels:[1],levelStars:{},playerName:"",consecutiveCorrect:0,squareOptions:[]};function I(){r={currentLevel:1,currentSubLevel:1,score:0,hintsLeft:3,board:[],currentEmptyCell:null,unlockedLevels:[1],levelStars:{},playerName:"",consecutiveCorrect:0,squareOptions:[]};try{O()}catch(e){console.error("Failed to load progress:",e)}const t=document.getElementById("app");t.innerHTML=`
    <div class="splash-screen" style="cursor: pointer; text-align: center; padding: 20px;">
      <div class="splash-mascot" style="font-size: 64px; margin-bottom: 20px;">🚀</div>
      <div class="splash-logo" style="font-size: 2.5em; font-weight: bold; margin-bottom: 30px; color: #6200ee;">Sudoku Buddies</div>
      <button id="start-button" style="font-size: 1.2em; padding: 10px 20px; background-color: #6200ee; color: white; border: none; border-radius: 8px; cursor: pointer;">Tap to Start</button>
    </div>
  `,document.getElementById("start-button").onclick=function(){p()}}function O(){console.log("Attempting to load progress...");const t=localStorage.getItem("sudokuLightState");if(t)try{const e=JSON.parse(t);console.log("Loaded state:",e),r.currentLevel=e.currentLevel||1,r.score=e.score||0,r.unlockedLevels=e.unlockedLevels||[1],r.levelStars=e.levelStars||{},r.playerName=e.playerName||"",r.consecutiveCorrect=e.consecutiveCorrect||0,r.squareOptions=e.squareOptions||[],console.log("Applied loaded state to gameState.")}catch(e){console.error("Failed to parse saved state:",e),localStorage.removeItem("sudokuLightState")}else console.log("No saved progress found.");x(r.score)}function C(){try{const t={currentLevel:r.currentLevel,score:r.score,unlockedLevels:r.unlockedLevels,levelStars:r.levelStars,playerName:r.playerName,consecutiveCorrect:r.consecutiveCorrect,squareOptions:r.squareOptions};localStorage.setItem("sudokuLightState",JSON.stringify(t)),console.log("Progress saved:",t)}catch(t){console.error("Failed to save state:",t)}}function j(){console.log("Resetting progress..."),localStorage.removeItem("sudokuLightState"),r={currentLevel:1,currentSubLevel:1,score:0,hintsLeft:3,board:[],currentEmptyCell:null,unlockedLevels:[1],levelStars:{},playerName:"",consecutiveCorrect:0,squareOptions:[]},console.log("GameState reset."),p()}function p(){$(r.unlockedLevels,t=>{r.currentLevel=t,F(t)},r.score)}function F(t){D(t,1)}function D(t,e){console.log(`Starting level ${t}-${e}`);try{const n=L(t,e);if(console.log("Level data:",n),window.currentLevelData=n,r.currentLevel=t,r.currentSubLevel=e,r.score=r.score||0,r.consecutiveCorrect=r.consecutiveCorrect||0,r.hintsLeft=3,t===6){console.log("Using special handling for Level 6 (6x6 grid)");try{const s=()=>{try{return E(n)}catch(c){console.error("Error generating Level 6 board:",c);const o=Array.from({length:6},()=>Array(6).fill(null));for(let q=0;q<6;q++)for(let u=0;u<6;u++)o[q][u]=n.numbers[(q+u)%6];let a=0;for(;a<n.hideCount;){const q=Math.floor(Math.random()*6),u=Math.floor(Math.random()*6);if(typeof o[q][u]!="object"){const i=o[q][u];o[q][u]={value:null,correctValue:i},a++}}return o}},l=new Promise(c=>{const o=s();c(o)}),A=new Promise(c=>{setTimeout(()=>{console.warn("Board generation timed out, using fallback");const o=Array.from({length:6},()=>Array(6).fill(null));for(let a=0;a<6;a++)for(let q=0;q<6;q++)if(Math.random()<.7)o[a][q]=n.numbers[(a+q)%6];else{const u=n.numbers[(a+q)%6];o[a][q]={value:null,correctValue:u}}c(o)},2e3)});Promise.race([l,A]).then(c=>{r.board=c,S()}).catch(c=>{console.error("Error in board generation promises:",c);const o=Array.from({length:6},(a,q)=>Array.from({length:6},(u,i)=>Math.random()<.7?n.numbers[(q+i)%6]:{value:null,correctValue:n.numbers[(q+i)%6]}));r.board=o,S()});return}catch(s){console.error("Critical error in Level 6 special handling:",s)}}try{r.board=E(n),S()}catch(s){console.error("Error generating board:",s),h("Error loading level. Returning to level select..."),setTimeout(()=>p(),2e3)}}catch(n){console.error("Error starting level:",n),h("Error loading level. Returning to level select..."),setTimeout(()=>p(),2e3)}}function w(t){for(let e=t.length-1;e>0;e--){const n=Math.floor(Math.random()*(e+1));[t[e],t[n]]=[t[n],t[e]]}return t}function H(t,e,n){let s,l;if(e===6?(s=2,l=3):Number.isInteger(Math.sqrt(e))?s=l=Math.sqrt(e):(s=1,l=e,console.warn(`Unsupported grid size ${e} for square constraints. Using row/col only.`)),window.currentLevelData&&window.currentLevelData.squares){const o=(q,u)=>(l*(q%s)+Math.floor(q/s)+u)%e,a=w([...n]);for(let q=0;q<e;q++)for(let u=0;u<e;u++)t[q][u]=a[o(q,u)];for(let q=0;q<e/s;q++){const u=q*s,i=[];for(let d=0;d<s;d++)i.push(u+d);const m=w([...i]),f=i.map(d=>[...t[d]]);for(let d=0;d<s;d++)t[i[d]]=f[m.indexOf(i[d])]}for(let q=0;q<e/l;q++){const u=q*l,i=[];for(let d=0;d<l;d++)i.push(u+d);const m=w([...i]),f=[];for(let d=0;d<l;d++){const g=i[d];f.push(t.map(k=>k[g]))}for(let d=0;d<l;d++){const g=i[d],k=m[d],N=f[i.indexOf(k)];for(let b=0;b<e;b++)t[b][g]=N[b]}}console.log(`Generated ${e}x${e} board with block constraints and shuffling.`);return}console.warn(`Generating ${e}×${e} grid using simple Latin Square pattern (no block constraints).`);const c=w([...n]);for(let o=0;o<e;o++)for(let a=0;a<e;a++)t[o][a]=c[(o+a)%e]}function Z(t,e,n){try{const s=Math.sqrt(e),l=Number.isInteger(s),A=window.currentLevelData&&window.currentLevelData.squares;if(!t||!Array.isArray(t)||t.length!==e)return console.error("Invalid board structure in validateBoard"),!1;for(let c=0;c<e;c++){if(!t[c]||!Array.isArray(t[c])||t[c].length!==e)return console.error(`Row ${c} is not properly initialized`),!1;const o=new Set;for(let a=0;a<e;a++){if(t[c][a]===null||t[c][a]===void 0)return console.error(`Cell at [${c},${a}] is null or undefined`),!1;o.add(t[c][a])}if(o.size!==e)return console.error(`Row ${c} has duplicate numbers`),!1}for(let c=0;c<e;c++){const o=new Set;for(let a=0;a<e;a++)o.add(t[a][c]);if(o.size!==e)return console.error(`Column ${c} has duplicate numbers`),!1}if(!A)return!0;if(l)for(let c=0;c<s;c++)for(let o=0;o<s;o++){const a=new Set;for(let q=0;q<s;q++)for(let u=0;u<s;u++)a.add(t[c*s+q][o*s+u]);if(a.size!==e)return console.error(`Block at [${c},${o}] has duplicate numbers`),!1}else if(e===6)for(let a=0;a<3;a++)for(let q=0;q<2;q++){const u=new Set;for(let i=0;i<2;i++)for(let m=0;m<3;m++){const f=a*2+i,d=q*3+m,g=t[f][d];if(g==null)return console.error(`Validation Error: Generated board has empty cell at [${f},${d}] in block [${a}, ${q}]`),!1;u.add(g)}if(u.size!==e)return console.error(`Validation Error: Block at [${a},${q}] (2x3) has ${u.size} unique numbers, expected ${e}. Numbers: ${[...u].join(",")}`),!1}return!0}catch(s){return console.error(`Global error in validateBoard: ${s.message}`),!1}}function E(t){const{gridSize:e,hideCount:n,numbers:s,patterns:l,squares:A}=t;console.log("Generating board with parameters:",{gridSize:e,hideCount:n,numbers:s});const c=Array.from({length:e},()=>Array(e).fill(null));r.squareOptions=Array.from({length:e},()=>Array.from({length:e},()=>[...s])),H(c,e,s);const o=Z(c,e);if(console.log("Board validity check:",o),!o)return console.error("Generated an invalid board, retrying..."),E(t);let a=0,q=0;const u=e*e*2;for(;a<n&&q<u;){const i=Math.floor(Math.random()*e),m=Math.floor(Math.random()*e);if(c[i][m]!==null&&typeof c[i][m]!="object"){const f=c[i][m];let d;f==null?(console.error(`Invalid value at position [${i}, ${m}]`),d=1):typeof f=="object"?(d=String(f),console.warn(`Object found at [${i}, ${m}], converting to string: ${d}`)):d=f,console.log(`Setting cell [${i}, ${m}] correctValue to ${d} (${typeof d})`),c[i][m]={value:null,correctValue:d},a++}q++}for(let i=0;i<e;i++)for(let m=0;m<e;m++){const f=c[i][m];f&&typeof f=="object"&&(f.correctValue===void 0||f.correctValue===null?(console.error(`Missing correctValue at [${i}, ${m}]`),f.correctValue=1):typeof f.correctValue=="object"&&(console.error(`Object correctValue at [${i}, ${m}]: ${JSON.stringify(f.correctValue)}`),f.correctValue=String(f.correctValue)))}return c}function S(){const t=document.getElementById("app"),e=document.createElement("div");e.className="container";const n=document.createElement("div");n.className="level-info",n.innerHTML=`<span>Planet ${r.currentLevel}</span> · <span>Riddle ${r.currentSubLevel}</span>`,n.style.margin="10px 0",n.style.fontWeight="bold",n.style.color="#4a2c91",e.appendChild(n);const s=document.createElement("div");s.className="score-banner",s.innerHTML=`
    <div class="score">
      <div class="score-label">Score</div>
      <div class="score-number">${r.score}</div>
    </div>
    <div class="hint-count">
      <div class="hint-label">Hints</div>
      <div class="hint-number">${r.hintsLeft}</div>
    </div>
    <div class="streak-count">
      <div class="streak-label">Streak</div>
      <div class="streak-number">${r.consecutiveCorrect}/5</div>
    </div>
  `,e.appendChild(s);const l=R(r.board,Y);e.appendChild(l);const A=document.createElement("div");A.className="controls";const c=document.createElement("div");c.className="button hint",c.textContent="💡 Hint",c.addEventListener("click",X),A.appendChild(c);const o=document.createElement("button");o.id="next-riddle-btn",o.className="button next-riddle-button",o.textContent="Next Riddle →",o.disabled=!0,o.addEventListener("click",ee),A.appendChild(o),console.log("Next Riddle button added to controls (disabled).");const a=document.createElement("div");a.className="button",a.textContent="🏠 Map",a.addEventListener("click",p),A.appendChild(a),e.appendChild(A);const q=T();t.innerHTML="",t.appendChild(e),t.appendChild(q);let u=-1,i=-1;for(let f=0;f<r.board.length;f++){for(let d=0;d<r.board[f].length;d++)if(r.board[f][d]&&r.board[f][d].value===null){u=f,i=d;break}if(u!==-1)break}u!==-1&&setTimeout(()=>{const f=document.querySelector(`.cell[data-row="${u}"][data-col="${i}"]`);f?(console.log(`Auto-focusing first empty cell: [${u}, ${i}]`),Y(f,u,i)):console.error(`Could not find DOM element for first empty cell [${u}, ${i}]`)},100);const m=document.createElement("div");m.className="celebrations",t.appendChild(m),r.currentLevel===1&&r.currentSubLevel===1&&setTimeout(()=>{M("Find the missing number!")},1e3)}function Y(t,e,n){console.log("Cell tapped:",e,n);const s=r.board[e][n],l=document.querySelector(".cell.selected");if(l&&l.classList.remove("selected"),document.querySelectorAll(".cell.threatening").forEach(c=>c.classList.remove("threatening")),s&&s.value===null){console.log("Empty cell found. Preparing number picker."),r.currentEmptyCell={element:t,row:e,col:n},t.classList.add("selected"),V(e,n);const c=L(r.currentLevel,r.currentSubLevel);console.log("Level data for picker:",c);const o=document.querySelector(".number-picker");if(console.log("Number picker element:",o),!o){console.error("Number picker element not found!");return}o.classList.add("open"),Q(r.squareOptions[e][n]||c.numbers)}else console.log("Cell not empty or invalid.")}function V(t,e){const n=r.board.length,s=Math.sqrt(n),l=Number.isInteger(s),A=window.currentLevelData&&window.currentLevelData.squares,c=document.querySelectorAll(".cell");for(let o=0;o<n;o++)if(o!==e){const a=t*n+o;c[a].classList.add("threatening")}for(let o=0;o<n;o++)if(o!==t){const a=o*n+e;c[a].classList.add("threatening")}if(A){if(l){const o=Math.floor(t/s)*s,a=Math.floor(e/s)*s;for(let q=0;q<s;q++)for(let u=0;u<s;u++){const i=o+q,m=a+u;if(i!==t||m!==e){const f=i*n+m;c[f].classList.add("threatening")}}}else if(n===6){const q=Math.floor(t/2)*2,u=Math.floor(e/3)*3;for(let i=0;i<2;i++)for(let m=0;m<3;m++){const f=q+i,d=u+m;if(f!==t||d!==e){const g=f*n+d;c[g]&&c[g].classList.add("threatening")}}}}}function Q(t){console.log("Populating number picker with:",t);const e=document.querySelector(".number-picker-options");if(console.log("Options container:",e),!e){console.error("Number picker options container not found!");return}e.innerHTML="",t.forEach(n=>{const s=document.createElement("div");s.className="number-option",s.textContent=n,s.dataset.number=n,s.addEventListener("click",()=>P(n)),e.appendChild(s)}),console.log("Number picker populated.")}function P(t){if(console.log("handleNumberPick called with number:",t),console.log("Current empty cell state:",r.currentEmptyCell),!r.currentEmptyCell){console.error("handleNumberPick: No current empty cell selected!");return}const{row:e,col:n,element:s}=r.currentEmptyCell,l=r.board[e][n];console.log(`Checking cell [${e}, ${n}]. Correct value: ${l.correctValue}`);const A=typeof t=="string"?parseInt(t,10):t,c=typeof l.correctValue=="string"?parseInt(l.correctValue,10):l.correctValue;if(console.log(`Comparing: number=${A} (${typeof A}), correctValue=${c} (${typeof c})`),A===c){console.log("Correct number picked!"),r.board[e][n].value=t,s.textContent=t,s.classList.remove("empty"),s.classList.add("filled"),s.classList.add("filled-correctly"),s&&(s.classList.remove("selected"),s.classList.remove("threatening")),document.querySelectorAll(".cell.threatening").forEach(d=>{d.classList.remove("threatening")}),setTimeout(()=>s.classList.remove("filled-correctly"),400),r.score+=1,x(r.score),C(),y("correct"),navigator.vibrate&&navigator.vibrate(100);let o=-1,a=-1;const q=r.board.length;let u=e,i=n+1,m=!1;for(;!m;){if(i>=q&&(u++,i=0),u>=q&&(u=0,i=0),u===e&&i===n){m=!0;break}if(r.board[u][i]&&r.board[u][i].value===null){o=u,a=i,m=!0;break}i++}if(o!==-1){const d=document.querySelector(`.cell[data-row="${o}"][data-col="${a}"]`);if(d){console.log(`Auto-advancing to next empty cell: [${o}, ${a}]`);const g=document.querySelector(".number-picker");g&&g.classList.remove("open"),Y(d,o,a);return}else console.error(`Could not find DOM element for next empty cell [${o}, ${a}]`)}const f=document.querySelector(".number-picker");if(f&&f.classList.remove("open"),console.log("Checking if level complete..."),K()){if(r.consecutiveCorrect++,console.log(`Consecutive correct answers: ${r.consecutiveCorrect}/5`),B(r.consecutiveCorrect),r.consecutiveCorrect>=5){const d=r.currentLevel+1;r.unlockedLevels.includes(d)||(console.log(`Unlocking level ${d}`),r.unlockedLevels.push(d),h(`Congratulations! You've unlocked Planet ${d}!`),C())}J()}console.log("Resetting current empty cell."),r.currentEmptyCell=null}else console.log("Incorrect number picked."),console.log(`Number picked: ${t} (${typeof t}), expected: ${l.correctValue} (${typeof l.correctValue})`),r.consecutiveCorrect>0&&(r.consecutiveCorrect=0,B(0),C(),h("Streak reset! You need 5 correct answers in a row to advance.")),s.classList.add("shake"),setTimeout(()=>s.classList.remove("shake"),500),y("wrong")}function B(t){const e=document.querySelector(".streak-number");if(e&&(e.textContent=`${t}/5`,t>=5?(e.style.color="#ff5722",e.style.fontWeight="bold",e.style.fontSize="1.2em",e.classList.add("pulse-animation")):t>=3?(e.style.color="#ff9800",e.style.fontWeight="bold",e.style.fontSize="1.1em",e.classList.remove("pulse-animation")):(e.style.color="",e.style.fontWeight="",e.style.fontSize="",e.classList.remove("pulse-animation"))),!document.querySelector(".pulse-animation-style")){const n=document.createElement("style");n.className="pulse-animation-style",n.textContent=`
      @keyframes pulse-streak {
        0% { transform: scale(1); }
        50% { transform: scale(1.2); }
        100% { transform: scale(1); }
      }
      .pulse-animation {
        animation: pulse-streak 1s infinite;
      }
    `,document.head.appendChild(n)}}function K(){for(let t=0;t<r.board.length;t++)for(let e=0;e<r.board[t].length;e++){const n=r.board[t][e];if(n&&n.value===null)return console.log("checkLevelComplete: Found empty cell, returning false"),!1}return console.log("checkLevelComplete: No empty cells found, returning true"),!0}function J(){console.log("--- handleLevelComplete START ---");const t=W(),e=`${r.currentLevel}-${r.currentSubLevel}`;r.levelStars[e]=Math.max(r.levelStars[e]||0,t);const n=r.currentLevel+1;r.consecutiveCorrect>=5&&!r.unlockedLevels.includes(n)&&(console.log(`Unlocking level ${n}`),r.unlockedLevels.push(n),h(`Congratulations! You've unlocked Planet ${n}!`)),C(),console.log("Calling showCelebration..."),z(t,r.playerName),console.log("Returned from showCelebration."),r.playerName?M(`Great job, ${r.playerName}!`):M("Great job!"),console.log("Enabling Next Riddle button...");const s=document.getElementById("next-riddle-btn");console.log("Found Next Riddle button element:",s),s?(s.disabled=!1,console.log("Next Riddle button ENABLED."),s.classList.add("enabled")):console.error("Could not find Next Riddle button to enable!"),console.log("--- handleLevelComplete END ---")}function W(){const t=3-r.hintsLeft;return t===0?3:t===1?2:1}function X(){if(console.log("handleHint called with currentEmptyCell:",r.currentEmptyCell),r.hintsLeft<=0){console.log("No hints left.");return}if(!r.currentEmptyCell){const c=document.querySelector(".cell.selected");if(console.log("No currentEmptyCell. Looking for selected cell:",c),c){const o=Array.from(document.querySelectorAll(".cell")),a=o.indexOf(c);if(a!==-1){const q=Math.sqrt(o.length),u=Math.floor(a/q),i=a%q;console.log(`Found selected cell at row ${u}, col ${i}`),r.currentEmptyCell={element:c,row:u,col:i}}}if(!r.currentEmptyCell){console.log("Could not find a selected cell for hint.");return}}const{row:t,col:e,element:n}=r.currentEmptyCell;if(!r.board[t]||!r.board[t][e]){console.error(`Invalid board position: [${t}, ${e}]`);return}const s=String(r.board[t][e].correctValue);console.log(`Correct value for cell [${t}, ${e}] is ${s}`);let l=r.squareOptions[t][e];(!l||l.length===0)&&(l=[...L(r.currentLevel,r.currentSubLevel).numbers],r.squareOptions[t][e]=l),console.log(`Current options for cell [${t}, ${e}]:`,l);const A=l.filter(c=>String(c)!==s);if(A.length>0){const c=Math.floor(Math.random()*A.length),o=A[c];console.log(`Removing wrong option ${o} from available options`),r.squareOptions[t][e]=l.filter(a=>a!==o),Q(r.squareOptions[t][e]),h(`Hint: ${o} is not the correct number!`),y("hint"),r.hintsLeft--,_(r.hintsLeft),r.score=Math.max(0,r.score-10),x(r.score)}else h("The correct number is the only option left!")}function h(t){let e=document.getElementById("toast");e||(e=document.createElement("div"),e.id="toast",e.className="toast",document.body.appendChild(e)),e.textContent=t,e.classList.add("show"),setTimeout(()=>{e.classList.remove("show")},3e3)}function _(t){const e=document.querySelector(".hint-number");e&&(e.textContent=t)}function M(t){if("speechSynthesis"in window){speechSynthesis.cancel();const e=new SpeechSynthesisUtterance(t);e.rate=.9,e.pitch=1.2,speechSynthesis.speak(e)}}window.resetGameProgress=j;function ee(){var t;if(console.log("goToNextRiddle called."),r.consecutiveCorrect>=5){let e=r.currentLevel,n=r.currentSubLevel+1;L(r.currentLevel,1);const s=((t=G.find(l=>l.id===r.currentLevel))==null?void 0:t.subLevels.length)||3;if(n>s){n=1,e++,console.log("Moving to next major level. Resetting streak."),r.consecutiveCorrect=0;const l=U();if(e>l){console.log("All levels completed! Showing level select."),p();return}if(!r.unlockedLevels.includes(e)){console.log(`Next level ${e} is locked. Showing level select.`),p();return}}console.log(`Starting next riddle: Level ${e}, SubLevel ${n}`),D(e,n)}else console.log("Generating a new riddle at the same level"),D(r.currentLevel,r.currentSubLevel)}document.addEventListener("DOMContentLoaded",()=>{I()});
